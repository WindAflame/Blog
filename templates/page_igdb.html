{%- set igdb_trans_data = load_data(path="templates/i18n.json", format="json") %}
<!-- Page article with information from IGDB -->
<article>
  <!-- Page Start inject -->
  {% include "injects/page_start.html" ignore missing %}

  <header class="mb-16">
    <h1 class="!my-0 pb-2.5">{{ page.title }}</h1>
    {%- if page.extra.igdb %}
    {% set igdb = page.extra.igdb -%}
    <div class="text-md antialiased pb-1">
      {%- if igdb.genres %}
      {{ macros::tr(key="igdb_genre", lk=lang, td=igdb_trans_data) }}: {% for genre in igdb.genres %}
        <a href="https://www.igdb.com/genres/#">{{ genre }}</a>{% if loop.index < igdb.genres|length %},{% endif %}
      {% endfor %}
      {%- endif %}      
      {%- if igdb.genres and igdb.companies %} |{% endif %}
      {%- if igdb.companies %}
      {{ macros::tr(key="igdb_company", lk=lang, td=igdb_trans_data) }}: {% for company in igdb.companies %}
        <a href="https://www.igdb.com/companies/#">{{ company }}</a>{% if loop.index < igdb.companies|length %},{% endif %}
      {% endfor %}
      {%- endif %}
    </div>
    {%- endif %}
    {% include "partials/page_info.html" %}
  </header>
  {%- if page.extra.cover.image %}
  <figure class="mb-12 mt-0">
    <img
      class="h-auto w-full rounded-lg"
      src="{{ get_url(path=page.extra.cover.image) }}"
      {% if page.extra.cover.alt is defined %}alt="{{ page.extra.cover.alt | escape_xml | safe }}"{% endif %}
      {% if g_image_data.width is defined %}width="{{ g_image_data.width | int }}"{% endif %}
      {% if g_image_data.height is defined %}height="{{ g_image_data.height | int }}"{% endif %}
    />
  </figure>
  {%- endif %}
  {%- if page.extra.cover.image_url %}
  <figure class="mb-12 mt-0">
    <img
      class="h-auto w-full rounded-lg"
      src="{{ page.extra.cover.image_url }}"
      {% if page.extra.cover.alt is defined %}alt="{{ page.extra.cover.alt | escape_xml | safe }}"{% endif %}
      {% if g_image_data.width is defined %}width="{{ g_image_data.width | int }}"{% endif %}
      {% if g_image_data.height is defined %}height="{{ g_image_data.height | int }}"{% endif %}
    />
  </figure>
  {%- endif %}
  {%- set page_toc = true %}
  {#- Table of contents #}
  {% include "partials/toc.html" %}
  {#- Content #}
  <section>{{ page.content | safe }}</section>
  <hr />
  {#- Post Taxonomies #}
  {% include "partials/post_taxonomies.html" %}
  {#- Post Nav #}
  {% include "partials/post_navigation.html" %}
  {%- if page.extra.comment | default(value=config.extra.comment) %}
  {#- Comment #}
  {% include "partials/comment.html" %}
  {%- endif %}
  {#- Page End inject #}
  {% include "injects/page_end.html" ignore missing %}
</article>